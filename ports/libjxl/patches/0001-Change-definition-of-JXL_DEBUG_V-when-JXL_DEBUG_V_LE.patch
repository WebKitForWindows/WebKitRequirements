From 4328916783a50d0bded57a536202e929318b5769 Mon Sep 17 00:00:00 2001
From: Dirk Lemstra <dirk@lemstra.org>
Date: Sat, 27 Jan 2024 14:33:35 +0100
Subject: [PATCH] Change definition of JXL_DEBUG_V when JXL_DEBUG_V_LEVEL is
 zero. (#3204)

(cherry picked from commit 1f9b04f743530c47ef9c0feba31e164ce7390f73)
---
 lib/jxl/base/status.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/lib/jxl/base/status.h b/lib/jxl/base/status.h
index 26390ad1..60d10898 100644
--- a/lib/jxl/base/status.h
+++ b/lib/jxl/base/status.h
@@ -110,8 +110,12 @@ inline JXL_NOINLINE bool Debug(const char* format, ...) {
 // JXL_DEBUG version that prints the debug message if the global verbose level
 // defined at compile time by JXL_DEBUG_V_LEVEL is greater or equal than the
 // passed level.
+#if JXL_DEBUG_V_LEVEL > 0
 #define JXL_DEBUG_V(level, format, ...) \
   JXL_DEBUG(level <= JXL_DEBUG_V_LEVEL, format, ##__VA_ARGS__)
+#else
+#define JXL_DEBUG_V(level, format, ...)
+#endif
 
 // Warnings (via JXL_WARNING) are enabled by default in debug builds (opt and
 // debug).
-- 
2.43.0.windows.1

